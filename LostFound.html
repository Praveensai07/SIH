<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Lost & Found Portal</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="LostFound.css">
</head>
<body>

<!-- HERO -->
<section class="hero">
  <div class="hero-content">
    <h1>Lost & Found Portal</h1>
    <p>Helping people reconnect with their lost belongings</p>
  </div>
</section>

<!-- MAIN -->
<section class="main">

  <!-- ITEMS -->
  <div class="items-section">
    <h2>Recently Reported Items</h2>

    <!-- SEARCH + FILTER -->
    <div class="search-bar">
      <input
        type="text"
        id="searchInput"
        placeholder="Search item, location, description..."
        onkeyup="applyFilters()"
      >

      <select id="filterType" onchange="applyFilters()">
        <option value="All">All</option>
        <option value="Lost">Lost</option>
        <option value="Found">Found</option>
      </select>
    </div>

    <div id="items"></div>
  </div>

  <!-- ACTION BUTTONS -->
  <div class="action-section">
    <button class="lost-btn" onclick="openForm('Lost')">Report Lost</button>
    <button class="found-btn" onclick="openForm('Found')">Report Found</button>
  </div>

</section>

<!-- MODAL FORM -->
<div class="modal" id="formModal">
  <div class="modal-content">
    <span class="close" onclick="closeForm()">Ã—</span>
    <h2 id="formTitle">Report Item</h2>

    <form id="lostFoundForm">
      <input type="hidden" id="type">

      <label>Item Name</label>
      <input type="text" id="itemName" required>

      <label>Description</label>
      <textarea id="description"></textarea>

      <label>Location</label>
      <input type="text" id="location">

      <label>Contact</label>
      <input type="text" id="contact" required>

      <label>Upload Image (JPG only)</label>
      <input type="file" id="image" accept="image/jpeg">

      <button type="submit">Submit</button>
    </form>
  </div>
</div>

<script>
  const modal = document.getElementById("formModal");

  function openForm(type) {
    document.getElementById("type").value = type;
    document.getElementById("formTitle").innerText = "Report " + type + " Item";
    modal.style.display = "flex";
  }

  function closeForm() {
    modal.style.display = "none";
  }

  document.getElementById("lostFoundForm").addEventListener("submit", function(e) {
    e.preventDefault();

    const type = document.getElementById("type").value;
    const name = itemName.value;
    const desc = description.value;
    const loc = location.value;
    const contactVal = contact.value;
    const file = image.files[0];

    let img = "https://images.unsplash.com/photo-1526170375885-4d8ecf77b99f";
    if (file) {
      if (file.type !== "image/jpeg") {
        alert("Only JPG images allowed");
        return;
      }
      img = URL.createObjectURL(file);
    }

    addItemToDB({
      name,
      description: desc,
      location: loc,
      contact: contactVal,
      type,
      image: img
    });

    closeForm();
    this.reset();
  });
</script>

<script src="LostFound.js"></script>
</body>
</html>
